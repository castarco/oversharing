---
import PageLayout from '@/layouts/Base'
import PostPreview from '@/components/blog/PostPreview'
import SocialList from '@/components/SocialList'
import { getAllPosts, sortMDByDate } from '@/utils'

const MAX_POSTS = 10
const allPosts = await getAllPosts()
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS)
---

<PageLayout meta={{ title: "Home" }}>
	<section>
		<h1 class="title mb-6">Hello World!</h1>
		<p class="mb-4">
			Hi! I'm Andreu, a Software Engineer from Barcelona, and I'm currently
			working on building my own small tech company, KindSpells Labs.
		</p>
		<p class="mb-4">
			Here you fill find a "weekly" newsletter where I'll tell you
			about my journey from working as a Senior Software Engineer towards
			bootstrapping my own business... if I don't fail first.
		</p>
		<SocialList />
	</section>
	<section aria-label="Subscription Form" class="mt-16">
		<form
			action="https://buttondown.email/api/emails/embed-subscribe/coderspirit"
			method="post"
			target="popupwindow"
			onsubmit="window.open('https://buttondown.email/coderspirit', 'popupwindow')"
			class="embeddable-buttondown-form"
		>
			<!-- <label for="bd-email">Enter your email</label> -->
			<input type="email" name="email" id="bd-email" class="brutal-txt inline-block py-2 px-4 border-2"/>
			<input type="submit" value="Subscribe" class="brutal-btn inline-block py-2 px-4 border-2 transition-all ease-in-out duration-150" />
			<p class="text-xs">
				<a href="https://buttondown.email/refer/coderspirit" target="_blank">Powered by Buttondown.</a>
			</p>
		</form>
	</section>
	<section aria-label="Blog post list" class="mt-16">
		<h2 class="title mb-4 text-xl">Posts</h2>
		<ul class="space-y-4 sm:space-y-2">
			{
				allPostsByDate.map((p) => (
					<li class="flex flex-col gap-x-2 sm:flex-row">
						<PostPreview post={p} />
					</li>
				))
			}
		</ul>
	</section>
	<!-- <section class="mt-16">
		<h2 class="title mb-4 text-xl">Technologies</h2>
		<ul class="space-y-4 sm:space-y-2">
			{
				cactusTech.map(({ href, title, desc }) => (
					<li>
						<a
							href={href}
							target="_blank"
							rel="noopener noreferrer"
							class="cactus-link inline-block"
						>
							{title}
						</a>:
						<p class="inline-block sm:mt-2">{desc}</p>
					</li>
				))
			}
		</ul>
	</section> -->
</PageLayout>
